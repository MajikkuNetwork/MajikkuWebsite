{% extends "base.html" %}
{% block content %}

    <style>
        /* REQUIRED STYLES FOR THE TOGGLE TO WORK */
        .dynamic-content {
            display: none; /* Hides all team sections by default */
        }
        .dynamic-content.visible {
            display: block; /* Shows the section when JS adds this class */
        }
        .role-btn {
            cursor: pointer; /* Shows it's clickable */
        }
        .role-btn.active {
            font-weight: bold;
            text-decoration: underline; /* Visual cue for selected team */
        }

        /* NEW DROPDOWN STYLES TO MATCH ADMIN TAB 
        YES */

        select {
            background-color: #1e2124; /* Dark background */
            color: #ffffff; /* White Text */
            border: 1px solid var(--accent, #00d4ff); /* Teal border using your accent var */
            padding: 10px;
            border-radius: 5px;
            width: 100%;
            font-family: inherit;
            font-size: 1rem;
            cursor: pointer;
            outline: none;
        }

        /* Style the options inside the dropdown */
        select option {
            background-color: #1e2124;
            color: #ffffff;
            padding: 10px;
        }

        /* Add a glow effect when clicked/focused */
        select:focus {
            box-shadow: 0 0 5px var(--accent, #00d4ff);
        }

        /* --- NEW: CHARACTER COUNTER STYLES --- */
        .char-count {
            display: block;
            text-align: right;
            font-size: 0.8rem;
            color: #888;
            margin-top: 4px;
            margin-bottom: 10px;
            font-family: monospace;
        }
        .char-count.limit-reached {
            color: #ff5555; /* Red when full */
            font-weight: bold;
        }
    </style>

    <h1>Majikku Network</h1>
    <p class="subtitle">Staff Application Form</p>

    <form id="appForm">
        <h2 class="section-title">General Information</h2>
        
        <div style="display: flex; gap: 20px; margin-bottom: 20px;">
            <div class="form-group" style="flex: 1;">
                <label>Discord Name (Verified)</label>
                <input type="text" value="{{ user['username'] }}" class="read-only" readonly>
            </div>
            <div class="form-group" style="flex: 1;">
                <label>Discord ID (Verified)</label>
                <input type="text" value="{{ user['id'] }}" class="read-only" readonly>
            </div>
        </div>

        <div class="form-group">
            <label>What is your Hytale Username?</label>
            <input type="text" id="hytale_name" maxlength="16" placeholder="Enter your expected in-game username" required>
            <div class="desc-text">Since the server is not yet live, please enter the name you have/plan to use.</div>
        </div>

        <div style="display: flex; gap: 20px;">
            <div class="form-group" style="flex: 1;">
                <label>How old are you?</label>
                <input type="number" class="counted-input" maxlength="3" id="age" required>
                <small class="char-count">0 / 3</small>
            </div>
            <div class="form-group" style="flex: 1;">
                <label>What is your Timezone?</label>
                <input type="text" id="timezone" class="counted-input" maxlength="30" placeholder="e.g. EST" required>
                <small class="char-count">0 / 30</small>
            </div>
        </div>

        <div class="form-group">
            <label>How many hours can you realistically contribute daily/weekly?</label>
            <div class="desc-text">This isn't a determining factor, just to gauge activity.</div>
            <input type="text" id="availability" class="counted-input" maxlength="20" placeholder="e.g. 2 hours a day" required>
            <small class="char-count">0 / 20</small>
        </div>

        <div class="form-group">
            <label>What language(s) are you fluent in?</label>
            <input type="text" id="languages" class="counted-input" maxlength="200">
            <small class="char-count">0 / 200</small>
        </div>

        <h2 class="section-title">Select Your Path</h2>
        <p style="text-align:center; margin-bottom: 20px;">What team are you applying for?</p>
        
        <div class="role-grid">
            <div class="role-btn" onclick="showTeam('mod', this)">Moderation Team</div>
            <div class="role-btn" onclick="showTeam('dev', this)">Development Team</div>
            <div class="role-btn" onclick="showTeam('build', this)">Build Team</div>
            <div class="role-btn" onclick="showTeam('artist', this)">Artist Team</div>
            <div class="role-btn" onclick="showTeam('story', this)">Story Teller Team</div>
            <div class="role-btn" onclick="showTeam('coordinator', this)">Coordinator Team</div>
            <div class="role-btn" onclick="showTeam('model', this)">Modeling Team</div>
            <div class="role-btn" onclick="showTeam('tester', this)">Tester Team</div>
        </div>


        <div id="mod" class="dynamic-content">
            <h3>Moderation Team Application</h3>
            <div class="team-description">
                The Moderation Team serves as the guardians of our community, responsible for maintaining a safe and positive environment for all players. Accepted Applicants will begin their journey as a <strong>Helper</strong>, serving as the front-line support for the community. In this role, you are responsible for welcoming new players, answering questions in Discord and in-game chat, and de-escalating minor conflicts before reporting serious offenses to the Moderators. We are looking for individuals who possess patience, maturity, strong communication skills, and a clean history within the community.  
            </div>

            <div class="form-group">
                <label>Why do you want to join the Moderation Team?</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="600" data-question="Why Mod Team?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>How confident are you in your ability to speak to other players/staff?</label>
                <div class="range-wrap">
                    <span>1</span>
                    <input type="range" min="1" max="10" class="team-answer" data-question="Comm Confidence" oninput="this.nextElementSibling.value = this.value">
                    <output style="color:var(--accent); font-weight:bold; margin-left:10px;">5</output>
                    <span>10</span>
                </div>
            </div>

            <div class="form-group">
                <label>Have you ever been a staff member on Majikku, or any where else?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Past Experience"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <h4>Scenario Questions</h4>

            <div class="form-group">
                <label>You observe a player that looks to be using hacks/unapproved mods on the network. Please describe in detail what you would do.</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="800" data-question="Scenario: Hacker"></textarea>
                <small class="char-count">0 / 800</small>
            </div>
            <div class="form-group">
                <label>The server is experiencing technical issues, but you are the only staff member online. Please describe in detail what you would do.</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="800" data-question="Scenario: Tech Issues"></textarea>
                <small class="char-count">0 / 800</small>
            </div>
            <div class="form-group">
                <label>You see that there is an argument between players or even staff members. Please describe in detail what you would do.</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="800" data-question="Scenario: Argument"></textarea>
                <small class="char-count">0 / 800</small>
            </div>
            <div class="form-group">
                <label>You are asked a question that you don't know the answer to. What would you do?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Scenario: Unknown Question"></textarea>
                <small class="char-count">0 / 600</small>
            </div>
            <div class="form-group">
                <label>A friend of yours starts breaking the rules, and you are the only staff seeing it. What would you do</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Scenario: Friend Breaking Rules"></textarea>
                <small class="char-count">0 / 600</small>
                <div class="desc-text" style="margin-top:5px;">Please be honest, If you wouldn't punish, describe why.</div>
            </div>
            <div class="form-group">
                <label>Would you be willing to assist with tickets?</label>
                <select class="team-answer" data-question="Willing to do Tickets">
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                    <option value="Maybe">Maybe</option>
                </select>
            </div>
            <div class="form-group">
                <label>Are you able to use a recording software and upload footage if/when necessary?</label>
                <select class="recording" data-question="Able to Record">
                    <option value="Yes">Yes</option>
                    <option value="No">No</option>
                </select>
            </div>
        </div>

        <div id="dev" class="dynamic-content">
            <h3>Development Team Application</h3>
            <div class="team-description">
                The Development Team is the engine that powers Majikku, and we are looking for technical wizards proficient in Java, Python, C#, or Hytale-specific scripting to help bring our custom features to life. Accepted Applicants will begin their journey as a <strong>Jr. Developer</strong>, an entry-level role focused on learning the server’s codebase. In this position, you will work closely with the Lead Developer to handle smaller tasks such as configuring existing plugins, fixing minor bugs, and assisting the main Developers with testing code in a live environment. To succeed in this role, we require proficiency in at least one relevant coding language, a willingness to learn, and the ability to solve complex logic puzzles.  
            </div>

            <div class="form-group">
                <label>Why are you interested in joining the team?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Dev Team?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Do you have previous experience?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Dev Experience"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>How well can you spot bugs and errors?</label>
                <textarea rows="2" class="team-answer counted-input" maxlength="400" data-question="Bug Spotting Ability"></textarea>
                <small class="char-count">0 / 400</small>
            </div>

            <div class="form-group">
                <label>Are you willing to learn new skills?</label>
                <textarea rows="2" class="team-answer counted-input" maxlength="300" data-question="Willing to Learn"></textarea>
                <small class="char-count">0 / 300</small>
            </div>

            <div class="form-group">
                <label>Programming Language Experience</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="600" data-question="Programming Languages"></textarea>
                <small class="char-count">0 / 600</small>
                <div class="desc-text">List any languages, frameworks, or relevant tech you know.</div>
            </div>

            <div class="form-group">
                <label>Tell us about yourself / Project Ideas</label>
                <textarea rows="4" class="team-answer counted-input" maxlength="800" data-question="Dev Bio/Ideas"></textarea>
                <small class="char-count">0 / 800</small>
            </div>
        </div>

        <div id="build" class="dynamic-content">
            <h3>Build Team Application</h3>
            <div class="team-description">
                The Build Team consists of the architects and landscapers who shape the physical world of Majikku, setting the visual standard for the player experience. Accepted Applicants will begin their journey as a <strong>Builder</strong>, responsible for constructing the physical world through terraforming terrain, detailing interiors and exteriors, and pasting schematics. Your focus will be on making the server visually immersive while adhering to our specific themes. To join this team, you must provide a portfolio demonstrating your building skills, an eye for detail, and the ability to work collaboratively on large-scale projects.  
            </div>

            <div class="form-group">
                <label>Why do you want to be a builder?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Builder?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Favorite Building Style?</label>
                <select class="team-answer" data-question="Build Style">
                    <option value="" disabled selected>Select a style...</option>
                    
                    <optgroup label="Server Themes (Priority)">
                        <option value="High Fantasy">High Fantasy (Magical, Wizard Towers)</option>
                        <option value="Medieval">Medieval (Castles, Villages)</option>
                        <option value="Rustic">Rustic (Nature, Cottages, Organic)</option>
                        <option value="Elven">Elven / Fae</option>
                        <option value="Dwarven">Dwarven / Underground</option>
                    </optgroup>

                    <optgroup label="Other Styles">
                        <option value="Steampunk">Steampunk / Industrial</option>
                        <option value="Gothic">Gothic / Dark</option>
                        <option value="Oriental">Oriental / Asian Architecture</option>
                        <option value="Greco-Roman">Greco-Roman (Classical)</option>
                        <option value="Modern">Modern / Contemporary</option>
                        <option value="Sci-Fi">Cyberpunk / Sci-Fi</option>
                        <option value="Other">Other (Please specify in portfolio)</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group">
                <label>Do you prefer Large or Small scale?</label>
                <select class="team-answer" data-question="Build Scale Preference">
                    <option value="Large">Large Scale</option>
                    <option value="Small">Small Scale</option>
                    <option value="Mix">Mix / No Preference</option>
                </select>
            </div>

            <div class="form-group">
                <label>Self-Assessment (1-10)</label>
                <div class="desc-text" style="margin-top:10px;">Attention to Detail</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Detail"><output>10</output></div>
                <div class="desc-text" style="margin-top:10px;">Terraforming</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Terraforming"><output>10</output></div>
                <div class="desc-text" style="margin-top:10px;">Interiors</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Interior"><output>10</output></div>
                <div class="desc-text" style="margin-top:10px;">Color Palettes</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Palettes"><output>10</output></div>
            </div>

            <div class="form-group">
                <label>Portfolio Link (Imgur/YouTube)</label>
                <input type="text" class="team-answer" data-question="Portfolio Link">
            </div>
        </div>

        <div id="artist" class="dynamic-content">
            <h3>Artist Team Application</h3>
            <div class="team-description">
                The Artist Team designs the visual elements that make Majikku unique, ensuring our graphical interface and promotional materials match the quality of our gameplay. Accepted Applicants will begin their journey as an <strong>Artist</strong>, responsible for creating custom textures, 2D art for user interfaces, promotional graphics for events, and concept art that helps the Build, Modeling and Development teams visualize the themes set by the creative leadership. To join this team, you must provide a digital art portfolio demonstrating your ability to create high-quality assets that align with our narrative vision.  
            </div>

            <div class="form-group">
                <label>Why do you want to join the Art Department?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Artist?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Experience Level with Digital Mediums</label>
                <select class="team-answer" data-question="Digital Experience">
                    <option value="" disabled selected>Select your experience level...</option>
                    <option value="Beginner">Beginner (Learning / <1 Year)</option>
                    <option value="Intermediate">Intermediate (Hobbyist / 1-3 Years)</option>
                    <option value="Advanced">Advanced (Freelance / 3+ Years)</option>
                    <option value="Professional">Professional (Industry Standard / Paid)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Preferred Art Medium?</label>
                <select class="team-answer" data-question="Preferred Medium">
                    <option value="" disabled selected>Select your main medium...</option>
                    
                    <optgroup label="Server Essentials">
                        <option value="Pixel Art">Pixel Art (Items, Icons, UI)</option>
                        <option value="Texturing">3D Texturing (Models, Skins)</option>
                        <option value="Vector Art">Vector Art (Logos, Clean UI)</option>
                    </optgroup>

                    <optgroup label="Illustration & Design">
                        <option value="Concept Art">Concept Art (Environmental, Character)</option>
                        <option value="Digital Painting">Digital Painting / Promotional Art</option>
                        <option value="Graphic Design">Graphic Design (Social Media, Banners)</option>
                    </optgroup>

                    <optgroup label="Other">
                        <option value="Voxel Art">Voxel Art</option>
                        <option value="Animation">Animation (2D)</option>
                        <option value="Traditional">Traditional Art (Scanned)</option>
                        <option value="Other">Other</option>
                    </optgroup>
                </select>
            </div>

            <div class="form-group">
                <label>Experience with 3D Models/Textures?</label>
                <input type="text" class="team-answer" data-question="3D Experience">
            </div>

            <div class="form-group">
                <label>Self-Rated Creativity (1-10)</label>
                <div class="range-wrap">
                    <span>1</span>
                    <input type="range" min="1" max="10" class="team-answer" data-question="Creativity Level" oninput="this.nextElementSibling.value = this.value">
                    <output style="color:var(--accent); font-weight:bold; margin-left:10px;">10</output>
                    <span>10</span>
                </div>
            </div>

            <div class="form-group">
                <label>Portfolio Link (Required)</label>
                <input type="text" class="team-answer" data-question="Art Portfolio">
            </div>
        </div>

        <div id="story" class="dynamic-content">
            <h3>Story Teller Application</h3>
            <div class="team-description">
                The Story Teller Team weaves the background narrative for the server’s world, providing the depth that makes Majikku immersive.  Accepted Applicants will begin their journey as a <strong>Story Teller</strong>, where you fill focus on crafting lore, character backstories, and event narratives that align with the server’s themes. You will collaborate closely with the Build, Modeling, and Development teams to ensure that the story elements are seamlessly integrated into the gameplay experience. We are looking for candidates with strong writing skills, creativity, and a passion for storytelling within a fantasy setting.
            </div>

            <div class="form-group">
                <label>Why join the Creative Team?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Writer?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Writing Skills Self-Assessment (1-10)</label>
                <div class="desc-text" style="margin-top:10px;">Grammar/Punctuation</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Grammar"><output>10</output></div>
                <div class="desc-text" style="margin-top:10px;">Story Structure</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Structure"><output>10</output></div>
                <div class="desc-text" style="margin-top:10px;">English Fluency</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Fluency"><output>10</output></div>
            </div>

            <div class="form-group">
                <label>Select a Writing Prompt</label>
                <select class="team-answer" data-question="Prompt Selection">
                    <option value="Create Creature">1. Create a Creature (Name & Lore)</option>
                    <option value="Create Game">2. Create a Game Concept (Theme & Story)</option>
                    <option value="Isekai">3. Thrown into Hytale (Life Story)</option>
                    <option value="Event Idea">4. Original Event Idea for Majikku</option>
                    <option value="Free Choice">5. Free Choice (Short Work)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Your Story (Min 5 Sentences)</label>
                <textarea rows="6" class="team-answer counted-input" maxlength="1500" data-question="Story Submission"></textarea>
                <small class="char-count">0 / 1500</small>
            </div>

            <div class="form-group">
                <label>Story Synopsis (1 Sentence summary)</label>
                <input type="text" class="team-answer counted-input" maxlength="300" data-question="Story Synopsis">
                <small class="char-count">0 / 300</small>
            </div>
        </div>

        <div id="coordinator" class="dynamic-content">
            <h3>Coordinator Team Application</h3>
            <div class="team-description">
                The Coordination Team manages the heartbeat of the server, keeping the community engaged through events and media.  Accepted Applicants will begin their journey as either an <strong>Event Coordinator</strong> or a <strong>Social Media Coordinator</strong>. Event Coordinators are responsible for brainstorming themes, writing detailed outlines, and executing live events, while Social Media Coordinators serve as the voice of the brand, creating content and engaging with the community across all platforms. We are seeking candidates with strong organizational skills, creativity, and previous experience in event planning or social media management.  
            </div>

            <div class="form-group">
                <label>Which focus are you applying for?</label>
                <select class="team-answer" data-question="Coordinator Focus">
                    <option value="Event Coordinator">Event Coordinator</option>
                    <option value="Social Media Coordinator">Social Media Coordinator</option>
                </select>
            </div>

            <div class="form-group">
                <label>Why do you want to join this team?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Coordinator?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Do you have experience managing communities or socials?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Coord Experience"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Link to previous work</label>
                <input type="text" class="team-answer" data-question="Coord Portfolio">
            </div>
        </div>

        <div id="model" class="dynamic-content">
            <h3>Modeling Team Application</h3>
            <div class="team-description">
                The Modeling Team brings the unique flavor of Majikku to life through custom assets that define the server’s aesthetic. Accepted Applicants will begin their journey as a <strong>Modeler</strong>, responsible for creating the essential items that fill the world, such as furniture, weapons, food, and decorative props. You must ensure that all models have accurate hitboxes and blend seamlessly with the default Hytale aesthetic.
            </div>

            <div class="form-group">
                <label>Why do you want to join the Modeling Team?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why Modeler?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>

            <div class="form-group">
                <label>Primary Software Proficiency</label>
                <select class="team-answer" data-question="Software Used">
                    <option value="" disabled selected>Select your main tool...</option>
                    <option value="Blockbench">Blockbench (Standard)</option>
                    <option value="Blender">Blender</option>
                    <option value="Cubik Studio">Cubik Studio</option>
                    <option value="MagicaVoxel">MagicaVoxel</option>
                    <option value="Other">Other (Cinema 4D, Maya, etc.)</option>
                </select>
            </div>

            <div class="form-group">
                <label>What do you prefer modeling?</label>
                <select class="team-answer" data-question="Model Preference">
                    <option value="" disabled selected>Select a preference...</option>
                    <option value="Organic">Organic (Mobs, Creatures, Characters)</option>
                    <option value="Hard Surface">Hard Surface (Weapons, Tools, Tech)</option>
                    <option value="Furniture">Furniture & Decor (Static Props)</option>
                    <option value="VFX">VFX & Particles</option>
                    <option value="Generalist">Generalist (I do it all)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Can you animate your models?</label>
                <select class="team-answer" data-question="Can Animate">
                    <option value="No">No, static models only</option>
                    <option value="Basic">Yes, basic movements (Idle, Walk)</option>
                    <option value="Advanced">Yes, complex animations (Attack, death, emotes)</option>
                </select>
            </div>

            <div class="form-group">
                <label>Skill Assessment (1-10)</label>
                
                <div class="desc-text" style="margin-top:10px;">Texturing / UV Mapping</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Texturing"><output>5</output></div>

                <div class="desc-text" style="margin-top:10px;">Low-Poly Efficiency</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Efficiency"><output>5</output></div>

                <div class="desc-text" style="margin-top:10px;">Hytale Style Matching</div>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="Skill: Style Match"><output>5</output></div>
            </div>

            <div class="form-group">
                <label>Show us your models (Portfolio Link)</label>
                <div class="desc-text">Sketchfab, ArtStation, or Imgur Album preferred.</div>
                <input type="text" class="team-answer" data-question="Model Portfolio">
            </div>
        </div>

        <div id="tester" class="dynamic-content">
            <h3>QA / Tester Team Application</h3>
            <div class="team-description">
                The Tester Team is our Quality Assurance department and the last line of defense before an update goes public. You will begin your journey as a <strong>Tester</strong>, where your role is not just to play games, but to break them. You will perform rigorous stress-testing on new and existing content to identify exploits, glitches, or balancing issues before public release, reporting all findings to your assigned Senior Tester. We require applicants to have the ability to write clear, reproducible bug reports. 
            </div>
            <div class="form-group">
                <label>Why do you want to join the QA/Tester Team?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="Why QA Team?"></textarea>
                <small class="char-count">0 / 600</small>
            </div>
            <div class="form-group">
                <label>Do you have experience with bug testing?</label>
                <textarea rows="3" class="team-answer counted-input" maxlength="600" data-question="QA Experience"></textarea>
                <small class="char-count">0 / 600</small>
            </div>
            <div class="form-group">
                <label>How detail-oriented are you? (1-10)</label>
                <div class="range-wrap"><input type="range" min="1" max="10" class="team-answer" data-question="QA Detail Level"><output>5</output></div>
            </div>
        </div>

        <h2 class="section-title">Miscellaneous</h2>
        
        <div class="form-group">
            <label>When is your birthday?</label>
            <div class="desc-text">Format: MM/DD (e.g., 09/20)</div>
            <input type="text" id="birthday" placeholder="MM/DD" pattern="\d{2}/\d{2}" title="MM/DD Format" class="misc-answer" data-question="Birthday" required>
        </div>

        <div class="form-group">
            <label>What is your current rank on the Network?</label>
            <input type="text" class="misc-answer" maxlength="50" data-question="Current Rank" required>
            <small class="desc-text">If no rank, enter "Default"</small>
        </div>

        <div class="form-group">
            <label>Do you have any alternate accounts?</label>
            <textarea rows="2" class="misc-answer counted-input" maxlength="300" data-question="Alts"></textarea>
            <small class="char-count">0 / 300</small>
        </div>

        <div class="form-group">
            <label>Do you have any issues with any players or staff?</label>
            <textarea rows="3" class="misc-answer counted-input" maxlength="600" data-question="Player/Staff Issues"></textarea>
            <small class="char-count">0 / 600</small>
        </div>

        <div class="form-group">
            <label>Do you have any punishments on the Network?</label>
            <input type="text" class="misc-answer" maxlength="100" data-question="Punishment History" required>
            <small class="desc-text">If none, enter "None"</small>
        </div>

        <div class="form-group">
            <label>What is your favorite mode/area of the Network?</label>
            <input type="text" class="misc-answer" maxlength="100" data-question="Favorite Mode" required>
            <small class="desc-text">e.g., Survival, Creative, Events, etc.</small>
        </div>

        <h2 class="section-title">Submission</h2>
        <div class="team-description" style="border-left-color: var(--secondary);">
            You have completed the application. Please make sure to do the following to allow our Staff Manager to contact you.
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="check_discord" required>
            <div>
                <label style="margin:0; display:inline;">Are you in the Discord Server?</label>
                <div class="desc-text"><a href="https://discord.majikku.org" target="_blank" style="color:var(--accent)">https://discord.majikku.org</a></div>
            </div>
        </div>

        <div class="checkbox-group">
            <input type="checkbox" id="check_dms" required>
            <div>
                <label style="margin:0; display:inline;">Please enable "Direct Messages" for servers members in the Majikku Discord Server.</label>
                <div class="desc-text">This allows the Staff Manager to contact you regarding your application.</div>
            </div>
        </div>

        <!--{% if player and player['hytale_uuid'] %}-->
        <button type="submit" class="submit-btn">Submit Application</button>
        <!--{% else %}
            <button type="button" class="submit-btn" disabled style="opacity: 0.5; cursor: not-allowed; background: #444;">
                Link Account Required to Submit
            </button>
        {% endif %}-->
    </form>


    <script>
        function showTeam(teamId, btnElement) {
            const allSections = document.querySelectorAll('.dynamic-content');
            allSections.forEach(section => {
                section.classList.remove('visible');
            });
            const allButtons = document.querySelectorAll('.role-btn');
            allButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            const targetSection = document.getElementById(teamId);
            if (targetSection) {
                targetSection.classList.add('visible');
            }
            if (btnElement) {
                btnElement.classList.add('active');
            }
        }

        // --- NEW CHARACTER COUNTER LOGIC ---
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('.counted-input');

            inputs.forEach(input => {
                const counter = input.nextElementSibling;
                const max = input.getAttribute('maxlength');

                const updateCount = () => {
                    const currentLength = input.value.length;
                    counter.innerText = `${currentLength} / ${max}`;
                    
                    if (currentLength >= max) {
                        counter.classList.add('limit-reached');
                    } else {
                        counter.classList.remove('limit-reached');
                    }
                };

                input.addEventListener('input', updateCount);
                // Initialize on load
                updateCount();
            });
        });
        // -----------------------------------

        const form = document.getElementById('appForm');
        form.addEventListener('submit', async function(event) {
            event.preventDefault(); 

            const activeBtn = document.querySelector('.role-btn.active');
            if (!activeBtn) {
                alert("Please select a team path at the top!");
                return;
            }

            const teamName = activeBtn.innerText;
            const visibleSection = document.querySelector('.dynamic-content.visible');
            
            // Gather General Info
            const payload = {
                hytale_name: document.getElementById('hytale_name').value,
                age: document.getElementById('age').value,
                timezone: document.getElementById('timezone').value,
                availability: document.getElementById('availability').value,
                languages: document.getElementById('languages').value,
                team: teamName,
                answers: {}
            };

            // Gather SPECIFIC Team Answers
            if (visibleSection) {
                const inputs = visibleSection.querySelectorAll('.team-answer');
                inputs.forEach(input => {
                    const question = input.getAttribute('data-question');
                    payload.answers[question] = input.value;
                });
            }

            // Gather MISC Answers
            const miscInputs = document.querySelectorAll('.misc-answer');
            miscInputs.forEach(input => {
                const question = input.getAttribute('data-question');
                payload.answers[question] = input.value;
            });

            // Agreements
            payload.answers["In Discord?"] = document.getElementById('check_discord').checked ? "Yes" : "No";
            payload.answers["DMs Enabled?"] = document.getElementById('check_dms').checked ? "Yes" : "No";

            // Send
            const btn = document.querySelector('.submit-btn');
            const originalText = btn.innerText;
            btn.innerText = "Sending...";
            btn.disabled = true;

            try {
                const response = await fetch('/submit', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    document.querySelector('.container').innerHTML = `
                        <h1 style="color:var(--accent)">Application Sent!</h1>
                        <p style="text-align:center">Thank you for applying to the Majikku Network.</p>
                        <p style="text-align:center"><a href="/" style="color:white">Return Home</a></p>
                    `;
                } else {
                    alert("Error: " + (result.error || "Unknown error"));
                    btn.innerText = originalText;
                    btn.disabled = false;
                }
            } catch (error) {
                console.error('Error:', error);
                alert("Network error.");
                btn.innerText = originalText;
                btn.disabled = false;
            }
        });
    </script>
{% endblock %}